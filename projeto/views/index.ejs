<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <title>Gerenciador de Tarefas</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <!-- NavegaÃ§Ã£o -->
  <nav>
    <a href="/">ğŸ“‹ Tarefas</a>
    <a href="/dashboard">ğŸ“Š Dashboard</a>
  </nav>

  <h1>ğŸ“ Minhas Tarefas</h1>

  <!-- FormulÃ¡rio de nova tarefa -->
  <form action="/add" method="POST" class="task-form">
    <input type="text" name="title" placeholder="TÃ­tulo" required />
    <input type="text" name="description" placeholder="DescriÃ§Ã£o" required />
    <select name="priority" required>
      <option value="">Prioridade</option>
      <option value="alta">Alta</option>
      <option value="baixa">Baixa</option>
    </select>
    <button type="submit">Adicionar</button>
  </form>

  <!-- Contador de tarefas concluÃ­das -->
  <p><strong>ConcluÃ­das:</strong> <%= tasks.filter(t => t.done).length %> / <%= tasks.length %></p>

  <!-- Lista de tarefas -->
  <ul>
    <% tasks.forEach((task, index) => { %>
      <li class="task-card <%= task.done ? 'done' : '' %> <%= task.priority %>">
        <!-- Checkbox para marcar como concluÃ­da -->
        <form action="/toggle" method="POST" style="display:inline;">
          <input type="hidden" name="index" value="<%= index %>" />
          <input type="checkbox" onchange="this.form.submit()" <%= task.done ? 'checked' : '' %> />
        </form>

        <!-- ConteÃºdo da tarefa -->
        <div class="task-content">
          <strong><%= task.title %></strong><br />
          <span><%= task.description %></span>
        </div>

        <!-- BotÃ£o de exclusÃ£o com confirmaÃ§Ã£o -->
        <form action="/delete" method="POST" style="display:inline;" onsubmit="return confirm('Tem certeza que deseja excluir esta tarefa?');">
          <input type="hidden" name="index" value="<%= index %>" />
          <button type="submit" class="delete-btn">ğŸ—‘ï¸</button>
        </form>
      </li>
    <% }) %>
  </ul>
</body>
</html>